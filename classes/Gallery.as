package classes {		import flash.display.MovieClip;	import flash.display.Stage;	import flash.text.TextField;	import flash.text.TextFieldAutoSize;	import flash.text.TextColorType;	import flash.events.MouseEvent;	import flash.events.Event;		import DynamicSlideShow;	import classes.Samples;		public class Gallery extends MovieClip {						private var _gallery:XML;				public var _samples:Samples;										public function Gallery(g:XML, x:Number,w:Number) {			// constructor code			this._gallery=g;			this.x = x;			this.y = 0;			this.width = w;									// stage accessible, call init function			if (stage) init();              else addEventListener(Event.ADDED_TO_STAGE, init); 					}				private function init(event:Event = null):void {			    		if (event) removeEventListener(Event.ADDED_TO_STAGE, init); // called via event, remove it						if(this._gallery.childIndex() == DynamicSlideShow.CURRENTGALLERY)			{				this.gotoAndStop("1");				this.loadSamples();											}else{				this.gotoAndStop("2");			}						this.title.text = this._gallery.@Name; 			this.addEventListener(MouseEvent.CLICK, onMouseClick);			this.addEventListener(MouseEvent.MOUSE_OVER, onMouseOver);		}						private function onMouseOver(e:MouseEvent):void		{			if(this.currentFrame == 2)			{				this.gotoAndStop("3");			    this.addEventListener(MouseEvent.MOUSE_OUT, onMouseOut);			}		}				private function onMouseOut(e:MouseEvent):void		{				this.gotoAndStop("2");		}											private function onMouseClick(e:MouseEvent):void		{			this.removeEventListener(MouseEvent.MOUSE_OUT, onMouseOut);			MovieClip(this.parent.parent).gotoAndStop(2);						MovieClip(this.parent.parent).home.gotoAndStop(1);						if(MovieClip(this.parent.parent).getChildByName("swfLoader"))			{				MovieClip(this.parent.parent).removeChild(MovieClip(this.parent.parent).getChildByName("swfLoader"));			}						DynamicSlideShow.CURRENTGALLERY = e.currentTarget.parent.getChildIndex(e.currentTarget);									this.loadSamples();					}				public function loadSamples()		{			for(var i:Number=0;i<this.parent.numChildren;i++)			{				var tab:Gallery = Gallery(this.parent.getChildAt(i));				tab.gotoAndStop("2");												if(tab._samples!=null)				{					MovieClip(this.parent.parent).removeChild(tab._samples);										tab._samples = null;				}							}						this.gotoAndStop("1");						DynamicSlideShow.CURRENTSAMPLE = 0;			DynamicSlideShow.CURRENTSLIDE = 0;						//MovieClip(this.parent.parent).title.text= this._gallery.@Name;			//trace(MovieClip(this.parent.parent).title.text);			MovieClip(this.parent.parent).desc.htmlText= this._gallery.desc;			this._samples = new Samples(this._gallery.sample);												MovieClip(this.parent.parent).addChild(this._samples);						this._samples.x= MovieClip(this.parent.parent).seperator.x;			this._samples.y= MovieClip(this.parent.parent).seperator.y;					}	}	}